---
tags:
  - Log
created: 2025-04-24 23:20
modified: 2025-04-24 23:20
---

## 2025-04-24 å¼€å‘æ—¥å¿—

### ðŸŽ¯ ä»Šæ—¥ç›®æ ‡
- [x] å®Œæˆå°ç»„é€‰é¢˜åŠŸèƒ½
- [x] å®Œæˆå°ç»„æŸ¥çœ‹è¯¦æƒ…åŠŸèƒ½
- [x] å®Œæˆå°ç»„é€€é€‰è¯¾ç¨‹åŠŸèƒ½
- [x] å®žçŽ°å‰ç«¯å°ç»„è¯¦æƒ…é¡µé¢è·¯ç”±

### ðŸ“ å®Œæˆæƒ…å†µ
- å°ç»„é€‰é¢˜åŠŸèƒ½å®žçŽ°
  - ä»£ç ä½ç½®ï¼š`backend/course/apis/views.py#L600-650`
  - ç›¸å…³æ–‡æ¡£ï¼šå®žçŽ°äº†å°ç»„é€‰é¢˜çš„APIæŽ¥å£ï¼ŒåŒ…æ‹¬é€‰é¢˜å’Œé€€é€‰åŠŸèƒ½
  - ä¸»è¦åŠŸèƒ½ï¼š
    - å°ç»„é€‰é¢˜éªŒè¯ï¼ˆè¯¾ç¨‹çŠ¶æ€ã€è¯¾é¢˜é€‰æ‹©æ¬¡æ•°é™åˆ¶ç­‰ï¼‰
    - å°ç»„é€€é€‰åŠŸèƒ½
    - é€‰é¢˜çŠ¶æ€ç®¡ç†

- å°ç»„è¯¦æƒ…åŠŸèƒ½å®žçŽ°
  - ä»£ç ä½ç½®ï¼š`backend/course/apis/views.py#L650-700`
  - ç›¸å…³æ–‡æ¡£ï¼šå®žçŽ°äº†èŽ·å–å°ç»„è¯¦æƒ…çš„APIæŽ¥å£
  - ä¸»è¦åŠŸèƒ½ï¼š
    - èŽ·å–å°ç»„åŸºæœ¬ä¿¡æ¯
    - èŽ·å–å°ç»„æˆå‘˜ä¿¡æ¯
    - èŽ·å–å°ç»„é€‰é¢˜ä¿¡æ¯

- å‰ç«¯å°ç»„è¯¦æƒ…é¡µé¢
  - ä»£ç ä½ç½®ï¼š`frontend/src/views/group/Detail.vue`
  - ç›¸å…³æ–‡æ¡£ï¼šå®žçŽ°äº†é€šè¿‡è·¯ç”±æ–¹å¼è®¿é—®å°ç»„è¯¦æƒ…çš„é¡µé¢
  - ä¸»è¦åŠŸèƒ½ï¼š
    - å°ç»„ä¿¡æ¯å±•ç¤º
    - æˆå‘˜åˆ—è¡¨å±•ç¤º
    - é€‰é¢˜ä¿¡æ¯å±•ç¤º

### â— é‡åˆ°çš„é—®é¢˜
- **é—®é¢˜æè¿°**ï¼šå°ç»„é€‰é¢˜æ—¶éœ€è¦è€ƒè™‘å¤šä¸ªçŠ¶æ€éªŒè¯ï¼ˆè¯¾ç¨‹çŠ¶æ€ã€é€‰é¢˜æ¬¡æ•°é™åˆ¶ç­‰ï¼‰
- **è§£å†³æ–¹æ¡ˆ**ï¼š
  - åœ¨é€‰é¢˜æŽ¥å£ä¸­å¢žåŠ äº†å¤šé‡éªŒè¯
  - ä½¿ç”¨äº‹åŠ¡ç¡®ä¿æ•°æ®ä¸€è‡´æ€§
  - æ·»åŠ äº†è¯¦ç»†çš„é”™è¯¯æç¤ºä¿¡æ¯
- **å…³è”è®°å½•**ï¼š`backend/course/apis/views.py#L600-650`

### ðŸŒ± æ˜Žæ—¥è®¡åˆ’
- [ ] å®žçŽ°å°ç»„ä»£ç ä¸Šä¼ åŠŸèƒ½
  - åŽç«¯APIæŽ¥å£å¼€å‘
  - æ–‡ä»¶å­˜å‚¨æ–¹æ¡ˆè®¾è®¡
  - æ–‡ä»¶ä¸Šä¼ é™åˆ¶é…ç½®
- [ ] å®žçŽ°ä»£ç ç‰ˆæœ¬ç®¡ç†åŠŸèƒ½
  - ç‰ˆæœ¬æŽ§åˆ¶æŽ¥å£è®¾è®¡
  - ç‰ˆæœ¬åŽ†å²è®°å½•åŠŸèƒ½
  - ä»£ç å¯¹æ¯”åŠŸèƒ½

### ðŸ“Œ ä¸´æ—¶ç¬”è®°
```python
# å°ç»„é€‰é¢˜çŠ¶æ€éªŒè¯
if course.status == "in_progress":
    raise ValidationError("è¯¾ç¨‹æ­£åœ¨è¿›è¡Œä¸­ï¼Œæ— æ³•é€‰é¢˜")
if course.status == "completed":
    raise ValidationError("è¯¾ç¨‹å·²ç»“æŸï¼Œæ— æ³•é€‰é¢˜")

# é€‰é¢˜æ¬¡æ•°é™åˆ¶éªŒè¯
current_selections = GroupSubject.objects.filter(course_subject=course_subject).count()
if current_selections >= course.max_subject_selections:
    raise ValidationError(f"è¯¥è¯¾é¢˜å·²è¢«é€‰æ‹©è¶…è¿‡æœ€å¤§æ¬¡æ•°ï¼ˆ{course.max_subject_selections}æ¬¡ï¼‰")
```
